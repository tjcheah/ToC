<!DOCTYPE html>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<style>
    table.table1 {
        border-collapse: collapse;
    }

    th, td {
        min-width: 30px;
        padding: 10px;
    }

    div.centerwrapper {
        margin-left: auto;
        margin-right: auto;
        max-width: 800px;
    }

    div.gallery {
        margin: 5px;
        border: 1px solid #ccc;
        float: left;
        width: 180px;
        display: inline-block;
    }

        div.gallery:hover {
            border: 1px solid #777;
        }

        div.gallery img {
            width: 100%;
            height: auto;
        }

    div.block {
        margin: 5px 5px 5px 5px;
        border: 1px solid #ccc;
        float: left;
        width: 192px;
        display: inline-block;
    }

    div.desc {
        padding: 15px;
        text-align: center;
    }

    div.RGinput {
        float: left;
        position: fixed;
    }

    #dynamic_table {
        position: relative;
        margin-top: 250px;
        float: left;
        display: inline-block;
    }

    div.Checkstrings {
        position: fixed;
        margin-left: 800px;
        float: left;
    }
</style>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>

    <div class="container">
        <h2>Assignment</h2>
        <p>TIC2151 - Theory of Computation</p>

        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
            <li><a data-toggle="tab" href="#RgtoNfa">RG -> NFA</a></li>
            <li><a data-toggle="tab" href="#NfatoRg">NFA -> RG</a></li>
            <li><a data-toggle="tab" href="helpDoc">Help + Doc</a></li>
        </ul>

        <div class="tab-content">
            <div id="home" class="tab-pane fade in active" style="text-align:center;">
                <h3 style="text-align:center;">Theory of Computation</h3>
                <div class="centerwrapper">
                    <div class="block">
                        <div class="gallery">
                            <a target="_blank" href="img_forest.jpg">
                                <img src="img_forest.jpg" width="600" height="400">
                            </a>
                            <div class="desc">Leader</div>
                        </div>
                    </div>
                    <div class="gallery">
                        <a target="_blank" href="tati.jpg">
                            <img src="tati.jpg" width="600" height="400">
                        </a>
                        <div class="desc">Tatiana Joanne Cheah (1161104048)</div>
                    </div>

                    <div class="gallery">
                        <a target="_blank" href="img_lights.jpg">
                            <img src="img_lights.jpg" alt="Northern Lights" width="600" height="400">
                        </a>
                        <div class="desc">Add member details here</div>
                    </div>

                    <div class="gallery">
                        <a target="_blank" href="img_mountains.jpg">
                            <img src="img_mountains.jpg" alt="Mountains" width="600" height="400">
                        </a>
                        <div class="desc">Add member details here</div>
                    </div>
                </div>
            </div>
            <div id="RgtoNfa" class="tab-pane fade">
                <!-- Input for RG -->
                <div class="RGinput">
                    <h5>Regular Grammar (input - here is &epsilon; symbol to paste when needed)</h5>
                    <table class="table1 table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">State</th>
                                <th scope="col">Transition</th>
                                <th colspan="9" style="text-align:center;">Variables</th>
                            </tr>
                            <tr>
                                <td><input type="text" id="s1" maxlength="1" size="1"></td>
                                <td><p style="text-align:center;">&rarr;</p></td>
                                <td><input type="text" id="v11" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v12" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v13" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v14" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v15" maxlength="5" size="5"></td>
                            </tr>
                            <tr>
                                <td><input type="text" id="s2" maxlength="1" size="1"></td>
                                <td><p style="text-align:center;">&rarr;</p></td>
                                <td><input type="text" id="v21" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v22" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v23" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v24" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v25" maxlength="5" size="5"></td>
                            </tr>
                            <tr>
                                <td><input type="text" id="s3" maxlength="1" size="1"></td>
                                <td><p style="text-align:center;">&rarr;</p></td>
                                <td><input type="text" id="v31" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v32" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v33" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v34" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v35" maxlength="5" size="5"></td>
                            </tr>
                            <tr>
                                <td><input type="text" id="s4" maxlength="1" size="1"></td>
                                <td><p style="text-align:center;">&rarr;</p></td>
                                <td><input type="text" id="v41" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v42" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v43" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v44" maxlength="5" size="5"></td>
                                <td><p style="text-align:center;">&#x7c;</p></td>
                                <td><input type="text" id="v45" maxlength="5" size="5"></td>
                            </tr>
                        </thead>
                    </table>
                    <button id="RG_submit" style="margin-top:5px;">Convert RG into NFA</button>
                </div>
                <div class="Checkstrings">
                    <h5>Check String (input)</h5>
                    <textarea name="RG" cols="20" rows="5" style="resize:none;"></textarea>
                    <br>
                    <button id="Checkstring1">Check</button>
                </div>
                <br>
                <br>
                <br>
                <br>
                <table id="dynamic_table">
                    <tr>
                        <td>
                            <div id="formal_def"></div>
                        </td>
                        <td>
                            <div id="trans_table"></div>
                        </td>
                    </tr>
                    </table>
                <script>
                    $(document).ready(function () {
                        $('#RG_submit').click(function () {
                            console.log("clicked")
                            document.getElementById("formal_def").innerHTML = ""; 
                            var check_states = function (a, start, end) {
                                if (a != start) {
                                    return a;
                                }
                                else if (a === start) {
                                    a = "> " + a;
                                    return a;
                                }
                                else if (a === end) {
                                    a = "* " + a;
                                    return a;
                                }
                            }

                            var check_final = function (a, prev) {
                                if (a != "") {
                                    return a
                                }
                                else {
                                    return prev
                                }
                            }
                            //determine states
                            var start = $('#s1').val();
                            var end = check_final($('#s2').val(), start);
                            var end = check_final($('#s3').val(), end);
                            var end = check_final($('#s4').val(), end);


                            //for presenting states in transition table
                            var st1 = check_states($('#s1').val(), start, end);
                            var st2 = check_states($('#s2').val(), start, end);
                            var st3 = check_states($('#s3').val(), start, end);
                            var st4 = check_states($('#s4').val(), start, end);

                            let states = [];
                            states.push(start, st2, st3, st4);
                            let list_states = [];
                            let i = 0;
                            while (i < 4) {
                                if (states[i] != "") {
                                    list_states.push(states[i]);
                                }
                                i++;
                            }

                            //determine alphabets
                            let list1 = [];
                            let list2 = [];
                            let list3 = [];
                            let alphas = [];
                            var vtext = "#v";
                            i = 1;
                            let j = 1;

                            while (i < 5) {
                                while (j < 6) {
                                    list1.push($(vtext + i + j).val());
                                    j++;
                                }
                                i++;
                                j = 1;
                            }

                            let x = 0;
                            let y = 0;
                            let w = 0;
                            let found = 0;

                            //looks out for lowercase letters
                            while (x < 20) {
                                if (list1[x] != "") {
                                    list3 = list1[x].split('');
                                    while (y < list3.length && /[a-z]/.test(list3[y])) {
                                        while (w <= list2.length) {
                                            if (list2[w] == list3[y]) {
                                                found = 1;
                                            }
                                            w++;
                                        }
                                        if (found == 0) {
                                            list2.push(list3[y]);
                                        }
                                        y++;
                                        w = 0;
                                        found = 0;
                                    }
                                }
                                x++;
                                y = 0;
                            }
                            x = 0;
                            while (x < list2.length) {
                                alphas.push(list2[x]);
                                x++;
                            }



                            $('#formal_def').append('<p><b>M = (Q, &Sigma;, &delta;, p<sub>0</sub>, F)</b><br>Q ={' + list_states.join(", ") + '}<br>&Sigma; = {' + alphas.join(", ") + '}<br>&delta;: Q &times; &sum;<sub>&epsilon;</sub> &rarr; Pow(Q)<br>p<sub>0</sub> = ' + start + '<br>F = {'+end+'}<p>');
                            //creating dynamic table for NFA
                            document.getElementById("trans_table").innerHTML = "<table class='table1 table-bordered' id='trans_bordered'></table>";

                            var body = document.body,
                                tbl  = document.getElementById('trans_bordered');

                            for(var m = 0; m < list_states.length + 1; m++){
                                var tr = tbl.insertRow();
                                for(var n = 0; n < alphas.length + 1; n++){
                                    var td = tr.insertCell();
                                    if (n >= 1 && m == 0) {
                                        // put all the variable to the most top of the table
                                        td.appendChild(document.createTextNode(alphas[n-1]));
                                    } else if (m != 0 && n == 0) {
                                        // put all the state name to the most left of the table
                                        var compare = list_states[m-1];
                                        if (compare == start) {
                                            // if the state is the initial state
                                            compare = ">" + compare;
                                        }
                                        if (compare == end) {
                                            // if the state is the final state
                                            compare = "*" + compare;
                                        }
                                        td.appendChild(document.createTextNode(compare));
                                    } else {
                                        td.appendChild(document.createTextNode(m + " + " + n));
                                    }
                                }
                            }
                        });
                    });
                </script>
            </div>
            <div id="NfatoRg" class="tab-pane fade">
                <h3>Menu 2</h3>
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
            </div>
            <div id="helpDoc" class="tab-pane fade">
                <h3>Menu 3</h3>
                <p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
            </div>
        </div>
    </div>

</body>
</html>
